<% content_for :title, "All contracts current and expired" %>
<% content_for :section_subtitle, "A historical record of all historical contractual agreements and information" %>

<div class="row">
	<div class="col-md-12">
		<%= render "/contracts/contract_clauses_key" %>
		<div class="panel panel-default">
			
			<div class="table-responsive"><br />	
				<table class="table table-condensed table-striped">
					<thead>
						<tr>
							<th></th>
							<th>Player</th>
							<th>Term</th>
							<% if current_user %><th></th><% end %>
						</tr>
					</thead>
					<tbody>
						<% @contracts.each do |contract| %>	
						
							<tr>
								<td class="<%=contract.is_bought_out ? 'bought-out' : contract.is_extended ? 'extended' : contract.is_franchised ? 'franchised' : '' %>"></td>
								<td class="<%=contract.is_bought_out ? 'bought-out' : contract.is_extended ? 'extended' : contract.is_franchised ? 'franchised' : '' %>"><%=link_to contract.player.full_name, contract.player %> 
								<% if contract.is_extended %>
										<i class="fa fa-plus-circle"></i> 
									<% end %>

									<% if contract.is_franchised %>
										<i class="fa fa-tag"></i>
									<% end %>
								</td>
								<td class="<%=contract.is_bought_out ? 'bought-out' : contract.is_extended ? 'extended' : contract.is_franchised ? 'franchised' : '' %>"><%=link_to "contracted", contract -%><% if contract.is_extended && contract.is_franchised %>, extended, and franchised 
									<% elsif contract.is_extended %> and extended 
									<% elsif contract.is_franchised %> and franchised<% end %>
										
										
									for <strong><%= contract.full_contract_length %></strong> years starting in <%= contract.subcontracts.map(&:contract_year).first %> until <%= contract.contract_start_year + contract.full_contract_length - 1 %>
									
								</td>
								<% if current_user %>
									<td class="<%=contract.is_bought_out ? 'bought-out' : contract.is_extended ? 'extended' : contract.is_franchised ? 'franchised' : '' %>"><%= link_to "Delete", contract, :confirm => 'Are you sure?', :method => :delete, :class => 'label label-danger' %></td>
								<% end %>
							</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
